(function(e,l,a){a.ajaxSetup({headers:{"X-CSRF-TOKEN":a('meta[name="csrf-token"]').attr("content")}});var s=a("#cb-periodos"),i=a("#cb-tramites");e.DataTableTramites.init(),a(".descripcion-tramite").hide(),a(".select2").each(function(){var t=a(this);t.wrap('<div class="position-relative"></div>'),t.select2({dropdownAutoWidth:!0,width:"100%",dropdownParent:t.parent()})}),s.on("change",function(){e.codper=a(this).val(),e.codtra=i.val(),e.DataTableTramites.reload()}),i.on("change",function(){e.codper=s.val(),e.codtra=a(this).val(),e.DataTableTramites.reload()}),a(".btn-nuevo-tramite").on("click",function(){e.codtra!=0&&e.codtra!==void 0&&e.codtra?(BlockSection("ajax-datatable"),a.ajax({url:"/tramites/hashed-url",type:"POST",dataType:"json",data:{codtra:e.codtra},success:function(t){e.location.replace("/tramites/nuevo/"+t.url)}})):Swal.fire({title:"Warning",text:"Primero seleccione un trámite",icon:"warning",showCancelButton:!1,confirmButtonText:"Ok",cancelButtonText:"Cerrar",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1})});var o=new Shepherd.Tour({defaultStepOptions:{classes:"shadow-md bg-purple-dark",scrollTo:!1,cancelIcon:{enabled:!0}},useModalOverlay:!0});r(o).start();function r(t){var n="btn btn-sm btn-outline-primary",c="btn btn-sm btn-primary btn-next";return t.addStep({title:"Periodos",text:"Indica el periodo en el que se llevó a cabo el trámite, pero no el periodo en el que se aplicará dicho trámite.",attachTo:{element:"#cb-periodos",on:"bottom"},buttons:[{action:t.cancel,classes:n,text:"Cerrar"},{text:"Siguiente",classes:c,action:t.next}]}),t.addStep({title:"Trámites",text:"Selecciona el trámite a realizar o a filtrar",attachTo:{element:"#cb-tramites",on:"bottom"},buttons:[{text:"Cerrar",classes:n,action:t.cancel},{text:"Atrás",classes:n,action:t.back},{text:"Siguiente",classes:c,action:t.next}]}),t.addStep({title:"Nuevo trámite",text:"Solicitar el trámite previamente seleccionado",attachTo:{element:"#btn-nuevo",on:"top"},buttons:[{text:"Atrás",classes:n,action:t.back},{text:"Siguiente",classes:c,action:t.next}]}),t.addStep({title:"Histórico",text:"Listado de trámites y servicios",attachTo:{element:"#ajax-datatable",on:"top"},buttons:[{text:"Atrás",classes:n,action:t.back},{text:"Finalizar",classes:c,action:t.cancel}]}),t}})(window,document,jQuery);
