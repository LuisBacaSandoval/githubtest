var i=$(".datatables-ajax");window.DataTableTramites=function(){return{init:function(){if(i.length){var a=i.dataTable({scrollY:300,scrollX:!0,scrollCollapse:!0,searching:!1,paging:!0,info:!0,dom:'<"card-header flex-column flex-md-row"<"head-label text-center"><"dt-action-buttons text-end pt-3 pt-md-0"B>><"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6 d-flex justify-content-center justify-content-md-end"f>>t<"row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',buttons:[{text:'<i class="ti ti-plus me-sm-1"></i> <span class="d-none d-sm-inline-block">Nuevo</span>',className:"btn-nuevo-tramite btn btn-primary waves-effect waves-light",attr:{id:"btn-nuevo"}}],ajax:{url:"/tramites/listado-historico",type:"POST",dataType:"json",beforeSend:function(){BlockSection("ajax-datatable")},data:function(e){e.codtra=window.codtra,e.codper=window.codper},complete:function(){$("#ajax-datatable").unblock()},error:function(e){showErrors(e)}},language:{paginate:{previous:'<i class="ti ti-chevron-left"></i>',next:'<i class="ti ti-chevron-right"></i>'}},order:[[5,"desc"]],columns:[{data:"expediente",name:"expediente"},{data:"stduni",name:"stduni"},{data:"tramite",name:"tramite"},{data:"estado",name:"estado"},{data:"monto",name:"monto"},{data:"pagado",name:"pagado"},{data:"fecha_registro",name:"fecha_registro",type:"date"},{data:"opcion",name:"opcion"}],columnDefs:[{targets:3,render:function(e,n,t,r){return typeof $status[e]>"u"?e:'<span class="badge rounded-pill '+$status[e].class+'">'+$status[e].title+"</span>"}},{targets:4,render:function(e,n,t,r){return typeof e=="number"?"S/. "+e:""}},{targets:5,render:function(e,n,t,r){var s={E:{title:"Pendiente",class:"bg-label-danger"},P:{title:"Pagado",class:" bg-label-success"},A:{title:"Anulado",class:" bg-label-info"}};return typeof s[e]>"u"?e:'<span class="badge rounded-pill '+s[e].class+'">'+s[e].title+"</span>"}},{targets:-1,orderable:!1,render:function(e,n,t,r){return'<a href="/tramites/seguimiento/'+t.hashed_url+'" class="item-edit btn-ver">Ver <i class="text-primary ti edit"></i></a>'}}]});return $("div.head-label").html('<h5 class="card-title mb-0">Histórico de Trámites y Servicios</h5>'),$(".datatables-ajax").on("click","a.btn-ver",function(){BlockSection("ajax-datatable")}),a}},reload:function(){var a=i.DataTable();a.ajax.reload()}}}();
